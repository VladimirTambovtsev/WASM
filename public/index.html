<!DOCTYPE html>
<html>
<head>
	<title>WASM Demo</title>
</head>
<body>
	<h1>WebAssembly Demo</h1>
</body>
<script>
	const imports = {
		// Decalre `consoleLog` C func to `console.log`'
		env: {
			consoleLog: console.log
		}
	}

	// Load WASM
	WebAssembly.instantiateStreaming( fetch('/program.wasm'), imports )
	.then( wasm => {
		console.log('WASM Ready.');

		// Make the wasm object accessible
		window.wasm = wasm

		// Check exported functions
		console.log(WebAssembly.Module.exports(wasm.module))

		// Get getDoubleNumber func
		wasm.instance.exports.getDoubleNumber(33)

	})
</script>
</html>